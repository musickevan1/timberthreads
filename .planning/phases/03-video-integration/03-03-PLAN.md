---
phase: 03-video-integration
plan: 03
type: execute
wave: 2
depends_on:
  - 03-01
files_modified:
  - src/components/VideoSection.tsx
  - src/app/page.tsx
autonomous: false

must_haves:
  truths:
    - "Dedicated video section exists on homepage between Gallery and Contact"
    - "Full promo video displays with native browser controls (play, pause, seek, volume, fullscreen)"
    - "Video section has descriptive heading and subtext"
    - "Video works on both desktop and mobile browsers"
  artifacts:
    - path: "src/components/VideoSection.tsx"
      provides: "New component with full promo video and controls"
      min_lines: 40
      exports: ["default VideoSection"]
    - path: "src/app/page.tsx"
      provides: "Updated homepage with VideoSection import and render"
      contains: "VideoSection"
  key_links:
    - from: "VideoSection.tsx video element"
      to: "public/assets/videos/promo-full.mp4"
      via: "source src attribute"
      pattern: "/assets/videos/promo-full\\.mp4"
    - from: "page.tsx"
      to: "VideoSection component"
      via: "import and JSX render"
      pattern: "import.*VideoSection.*from.*components/VideoSection"
---

<objective>
Create dedicated video section component and integrate into homepage to display full promo video with playback controls.

Purpose: Provide visitors with full video tour of the retreat center in a dedicated section with standard video controls.

Output: New VideoSection.tsx component integrated into page.tsx between Gallery and Contact sections.
</objective>

<execution_context>
@/home/evan/.claude/get-shit-done/workflows/execute-plan.md
@/home/evan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/phase-3-RESEARCH.md
@src/app/page.tsx
@src/components/Gallery.tsx
@src/components/Contact.tsx
</context>

<tasks>

<task type="auto">
  <name>Create VideoSection component with full promo video and controls</name>
  <files>src/components/VideoSection.tsx</files>
  <action>
Create new file src/components/VideoSection.tsx with the following structure:

1. **Client component directive:** 'use client' at top

2. **Component structure:**
   - Section wrapper: `<section id="video" className="py-20 bg-stone-50">`
   - Container: `<div className="container mx-auto px-4 sm:px-6 lg:px-8">`
   - Header section with centered text:
     - H2: "Experience Our Island Retreat" (text-3xl sm:text-4xl font-serif font-medium text-stone-900 mb-4)
     - P: "Take a virtual tour of our unique quilting and crafting retreat center, nestled on a peaceful island surrounded by a serene lake in rural Missouri." (text-lg text-stone-600 max-w-2xl mx-auto)
   - Video container: `<div className="max-w-4xl mx-auto">`
   - Video wrapper: `<div className="relative aspect-video bg-stone-200 rounded-lg overflow-hidden shadow-xl">`
   - Video element with controls and poster
   - Caption below: Small text describing the video content

3. **Video element attributes:**
   - controls (native browser controls)
   - preload="metadata" (performance optimization)
   - poster="/assets/videos/promo-poster.jpg"
   - className="w-full h-full"
   - source: /assets/videos/promo-full.mp4, type="video/mp4"
   - Fallback content: paragraph with download link for unsupported browsers

4. **Use existing component styling patterns:**
   - Match About.tsx, Gallery.tsx section styling (py-20, bg-stone-50)
   - Match heading styles from other sections (font-serif, font-medium)
   - Use stone color palette (stone-900, stone-600, stone-200)
   - Use teal accent for links if needed (teal-600)

**Do NOT add custom video player UI** - use native `controls` attribute for accessibility and browser compatibility.
  </action>
  <verify>
Check file exists and has correct structure:
```bash
cat src/components/VideoSection.tsx
```

Verify:
- File starts with 'use client' directive
- Component exports default VideoSection
- Video element has controls attribute
- Video source points to /assets/videos/promo-full.mp4
- Poster attribute set to /assets/videos/promo-poster.jpg
  </verify>
  <done>
- src/components/VideoSection.tsx created
- Component has 'use client' directive at top
- Section has id="video" for potential scroll navigation
- Video element includes controls, preload="metadata", poster attributes
- Video source is /assets/videos/promo-full.mp4
- Poster is /assets/videos/promo-poster.jpg
- Fallback content for unsupported browsers included
- Styling matches existing component patterns (stone colors, font-serif, rounded-lg, shadow-xl)
- Component exports default VideoSection
  </done>
</task>

<task type="auto">
  <name>Integrate VideoSection into homepage between Gallery and Contact</name>
  <files>src/app/page.tsx</files>
  <action>
Update src/app/page.tsx to add VideoSection:

1. **Add import** after existing component imports:
   ```tsx
   import VideoSection from '../components/VideoSection';
   ```

2. **Add component to render** between Gallery and Contact:
   ```tsx
   <Gallery />
   <VideoSection />
   <Contact />
   ```

3. **Verify order of sections:**
   - NavBar
   - Hero (with video background from plan 02)
   - About
   - Workshops
   - Accommodations
   - Calendar
   - Gallery
   - VideoSection (NEW)
   - Contact
   - Map
   - Connect
   - Footer

Keep all existing imports and components unchanged. Only add VideoSection import and render.
  </action>
  <verify>
Run development server and navigate to homepage:
```bash
npm run dev
```

Open http://localhost:3000 and:
1. Scroll to video section (after Gallery, before Contact)
2. Verify video section renders with heading and video player
3. Check browser console for errors
4. Verify video controls are visible (play button, seek bar, volume, fullscreen)
  </verify>
  <done>
- VideoSection imported in page.tsx
- VideoSection component renders between Gallery and Contact
- Section order matches expected flow
- No TypeScript or build errors
- Video section visible on homepage
- Video controls (play, pause, seek, volume, fullscreen) functional
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify complete video integration across devices and connection types</name>
  <what-built>
Complete video integration including:
- Hero background video with autoplay, muted loop, and pause/play control
- Dedicated VideoSection with full promo video and native controls
- Connection detection to disable video on slow networks
- Poster image fallbacks for accessibility and performance
  </what-built>
  <how-to-verify>
**Desktop Testing:**

1. **Start development server:**
   ```bash
   npm run dev
   ```

2. **Visit http://localhost:3000**

3. **Test Hero video:**
   - [ ] Hero section displays background video (not static image)
   - [ ] Video autoplays muted in a loop
   - [ ] Pause/play button visible in top-right corner
   - [ ] Click pause button - video stops
   - [ ] Click play button - video resumes
   - [ ] Video is visually smooth, no compression artifacts

4. **Test VideoSection:**
   - [ ] Scroll to video section (after Gallery, before Contact)
   - [ ] Full promo video displays with controls
   - [ ] Click play - video plays with sound
   - [ ] Seek bar works (can skip forward/backward)
   - [ ] Volume control works
   - [ ] Fullscreen button works
   - [ ] Video quality is acceptable throughout

5. **Test connection detection** (Chrome DevTools):
   - [ ] Open DevTools -> Network tab
   - [ ] Set throttling to "Fast 3G"
   - [ ] Refresh page
   - [ ] Hero should show poster image, not video
   - [ ] VideoSection still renders (poster image as placeholder)

6. **Test reduced motion:**
   - [ ] Open System Preferences -> Accessibility -> Display -> Reduce Motion
   - [ ] Enable "Reduce motion"
   - [ ] Refresh page
   - [ ] Hero shows poster image, not autoplay video

**Mobile Testing:**

7. **Test on iOS Safari** (if available):
   - [ ] Hero video plays inline (not fullscreen on autoplay)
   - [ ] Pause/play button works
   - [ ] VideoSection video plays with controls

8. **Test on Android Chrome** (if available):
   - [ ] Hero video autoplays muted
   - [ ] VideoSection video plays normally

**Performance:**

9. **Check file sizes:**
   ```bash
   ls -lh public/assets/videos/
   ```
   - [ ] hero-background.mp4 under 5MB
   - [ ] promo-full.mp4 under 10MB
   - [ ] Combined under 15MB total

10. **Check page load performance:**
    - [ ] Hero section renders quickly
    - [ ] Video doesn't block initial page render
    - [ ] No console errors

**Issues to watch for:**
- Video doesn't autoplay on iOS (missing playsInline attribute)
- Hero video blocks page load (preload="auto" instead of "metadata")
- Pause/play button not visible or not functional
- VideoSection video missing controls
- Videos too large (slow page load)
- Compression artifacts in sky/gradient areas
  </how-to-verify>
  <resume-signal>
Reply with "approved" if all tests pass.

If issues found, describe:
- What doesn't work
- Which browser/device
- Console errors (if any)
- Screenshots if helpful
  </resume-signal>
</task>

</tasks>

<verification>
After user approval:
- [ ] Hero component displays background video on fast connections
- [ ] Hero video autoplays muted with loop and playsInline
- [ ] Hero pause/play control works correctly
- [ ] Hero shows poster on slow connections (2G/3G) and reduced motion
- [ ] VideoSection component created and renders
- [ ] VideoSection displays full promo with native controls
- [ ] VideoSection integrated into page.tsx between Gallery and Contact
- [ ] Videos work on desktop (Chrome, Firefox, Safari)
- [ ] Videos work on mobile (iOS Safari, Android Chrome)
- [ ] File sizes meet requirements (<5MB hero, <10MB promo)
- [ ] No console errors or TypeScript compilation issues
</verification>

<success_criteria>
- All VID-01 through VID-07 requirements satisfied
- Hero background video autoplays muted on desktop with fast connections
- Hero video has high-quality poster fallback image
- Hero video has visible, functional pause/play control
- Dedicated video section displays full promo with playback controls
- Videos are self-hosted (no YouTube/Vimeo branding)
- Total video file size under 15MB
- Videos disabled on slow connections (2G/3G) showing poster instead
- Videos work on both desktop browsers and mobile (iOS Safari, Android Chrome)
- User has verified complete functionality across devices and connection types
</success_criteria>

<output>
After completion, create `.planning/phases/03-video-integration/03-03-SUMMARY.md`
</output>
